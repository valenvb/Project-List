(function(e){e.fn.projectList=function(t){var n,r={},i,s=e.fn.projectList,o=0,u,a;if(typeof t==="string"){r.username=t}else{r=t}n=e.extend({},e.fn.projectList.options,r);s.settings=n;s.projects={};if(n.isContainer){i=this}else{i=e(n.containerID)}u=s.getProjects(s,n.username);u.done(function(t){var r,u;for(r in t){s.projects[r]=r;if(e.inArray(t[r].name,n.hide)===-1){u=s.widget(n,t[r],o);e(i).append(u)}o+=1}});return this};e.fn.projectList.widget=function(t,n,r){var i="<div class='project-well' id='project-"+n.name+"' style='margin-right:"+t.marginRight+"; margin-bottom:"+t.marginBottom+"; '> <div class='project-header'> <a target='"+t.linksOpenIn+"' href='"+n.url+"'> ";if(n.img!==null){i+="<span class='project-icon'><img src='"+n.img+"' alt='"+n.name+"'></span>"}i+="<h4 class='project-name'>"+n.name+" </h4> </a> <span class='project-lang'> "+(n.lang===null?"":n.lang)+"</span></div><div class='project-body'> <div class='project-description'> <small> "+n.desc+"</small></div> <div class='project-links'>";if(t.images.demo!==""&&n.demoURL!==""&&n.demoURL!==undefined){i+="<a target='"+t.linksOpenIn+"' href='"+n.demoURL+"'><img class='project-link-img' src='"+t.images.demo+"' alt='clone' title='Demo' ></a>"}if(t.images.wiki!==""&&n.wikiURL!==""&&n.wikiURL!==undefined){i+="<a target='"+t.linksOpenIn+"' href='"+n.wikiURL+"'><img class='project-link-img'src='"+t.images.wiki+"' alt='clone' title='Wiki' ></a>"}if(t.images.download!==""&&n.dlURL!==""&&n.dlURL!==undefined){i+="<a target='"+t.linksOpenIn+"' href='"+n.dlURL+"'><img class='project-link-img' src='"+t.images.download+"' alt='clone' title='Downloads' ></a>"}if(t.images.fork!==""&&n.forkURL!==""&&n.forkURL!==undefined){i+="<a target='"+t.linksOpenIn+"' href='"+n.forkURL+"'><img class='project-link-img' src='"+t.images.fork+"' alt='clone' title='Fork' ></a>"}if(t.images.clone!==""&&n.cloneURL!==""&&n.cloneURL!==undefined){i+="<a class='project-git-clone-link' target='"+t.linksOpenIn+"' href='"+n.cloneURL+"'><img class='project-link-img' src='"+t.images.clone+"' alt='clone' title='Clone' ></a>"}i+="</div> </div> </div>";return e.parseHTML(i)};e.fn.projectList.getProjects=function(t,n){function a(t){var n=e.Deferred();e.ajax({url:t,dataType:"jsonp",crossDomain:true,async:false}).done(function(e){n.resolve(e)}).fail(function(e){n.reject(e)});return n.promise()}var r,i=e.Deferred(),s={img:t.settings.githubDefaultIcon},o=[],u={};if(typeof n==="string"){r={github:n,bitbucket:n}}else{r=n}if(r.github!==""){(function(){var n="https://api.github.com/users/"+r.github+"/repos",i,s;i=a(n);s=i.done(function(n){var r=n.data;e.each(r,function(n,r){var i={origin:"github",name:r.name,url:r.html_url,cloneURL:r.clone_url,desc:r.description,wikiURL:r.html_url+"/wiki",isFork:r.fork,lang:r.language,img:function(){if(r.fork){return t.settings.images.fork}else{return t.settings.images.githubDefaultIcon}}(),demoURL:"",forkURL:r.html_url+"/fork",dlURL:"",parent:function(){var t;if(r.fork){e.ajax({url:r.url,async:false,success:function(e){return e.parent.full_name}})}else{return""}}()};u[i.name]=i})});o.push(s)})()}if(r.bitbucket!==""){(function(){var t="https://bitbucket.org/api/2.0/repositories/"+r.bitbucket,n,i;n=a(t);i=n.done(function(t){var n=t.values;e.each(n,function(e,t){var n={origin:"bitbucket",name:t.name,url:t.links.html.href,cloneURL:t.links.html.href+".git",desc:t.description,wikiURL:function(){if(t.has_wiki===true){return t.links.html.href+"/wiki"}else{return""}}(),isFork:false,lang:t.language,img:t.links.avatar.href,forkURL:function(){if(t.fork_policy!=="no_public_forks"){return t.links.html.href+"/fork"}else{return""}}()};u[n.name]=n})});o.push(i)})()}e.when.apply(null,o).done(function(){i.resolve(u)});return i.promise()};e.fn.projectList.options={isContainer:true,templateID:"",containerID:"",marginRight:"20px",marginBottom:"20px",username:{github:"",bitbucket:"",customURL:""},displayUsernames:false,hide:[],images:{githubDefaultIcon:"img/repo.png",demo:"img/desktop.png",clone:"img/clone.png",wiki:"img/wiki.png",fork:"img/fork.png",download:"img/download.png"},linksOpenIn:"_blank",showStars:true,showZeroStars:false}})(jQuery)