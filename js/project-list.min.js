!function(i){i.fn.projectList=function(e){var n,t,o,r={},a=i.fn.projectList,s=0
return"string"==typeof e?r.username=e:r=e,n=i.extend({},i.fn.projectList.options,r),a.settings=n,a.projects={},t=n.isContainer?this:i(n.containerID),o=a.getProjects(a,n.username),o.done(function(e){var o,r
for(o in e)a.projects[o]=o,-1===i.inArray(e[o].name,n.hide)&&(r=(n.widget||a.widget).apply(window,[n,e[o],s]),i(t).append(r)),s+=1}),this},i.fn.projectList.widget=function(e,n){var t="<div class='project-well' id='project-"+n.name+"' style='margin-right:"+e.marginRight+"; margin-bottom:"+e.marginBottom+"; '> <div class='project-header'> <a target='"+e.linksOpenIn+"' href='"+n.url+"'> "
return null!==n.img&&(t+="<span class='project-icon'><img src='"+n.img+"' alt='"+n.name+"'></span>"),t+="<h4 class='project-name'>"+n.name+" </h4> </a> <span class='project-lang'> "+(null===n.lang?"":n.lang)+"</span></div><div class='project-body'> <div class='project-description'> <small> "+n.desc+"</small></div> <div class='project-links'>",""!==e.images.demo&&""!==n.demoURL&&void 0!==n.demoURL&&(t+="<a target='"+e.linksOpenIn+"' href='"+n.demoURL+"'><img class='project-link-img' src='"+e.images.demo+"' alt='clone' title='Demo' ></a>"),""!==e.images.wiki&&""!==n.wikiURL&&void 0!==n.wikiURL&&(t+="<a target='"+e.linksOpenIn+"' href='"+n.wikiURL+"'><img class='project-link-img'src='"+e.images.wiki+"' alt='clone' title='Wiki' ></a>"),""!==e.images.download&&""!==n.dlURL&&void 0!==n.dlURL&&(t+="<a target='"+e.linksOpenIn+"' href='"+n.dlURL+"'><img class='project-link-img' src='"+e.images.download+"' alt='clone' title='Downloads' ></a>"),""!==e.images.fork&&""!==n.forkURL&&void 0!==n.forkURL&&(t+="<a target='"+e.linksOpenIn+"' href='"+n.forkURL+"'><img class='project-link-img' src='"+e.images.fork+"' alt='clone' title='Fork' ></a>"),""!==e.images.clone&&""!==n.cloneURL&&void 0!==n.cloneURL&&(t+="<a class='project-git-clone-link' target='"+e.linksOpenIn+"' href='"+n.cloneURL+"'><img class='project-link-img' src='"+e.images.clone+"' alt='clone' title='Clone' ></a>"),t+="</div> </div> </div>",i.parseHTML(t)},i.fn.projectList.getProjects=function(e,n){function t(e){var n=i.Deferred()
return i.ajax({url:e,dataType:"jsonp",crossDomain:!0,async:!1}).done(function(i){n.resolve(i)}).fail(function(i){n.reject(i)}),n.promise()}var o,r=i.Deferred(),a=({img:e.settings.githubDefaultIcon},[]),s={}
return o="string"==typeof n?{github:n,bitbucket:n}:n,""!==o.github&&!function(){var n,r,l="https://api.github.com/users/"+o.github+"/repos"
n=t(l),r=n.done(function(n){var t=n.data
i.each(t,function(n,t){var o={origin:"github",name:t.name,url:t.html_url,cloneURL:t.clone_url,desc:t.description,wikiURL:t.html_url+"/wiki",isFork:t.fork,lang:t.language,img:function(){return t.fork?e.settings.images.fork:e.settings.images.githubDefaultIcon}(),demoURL:"",forkURL:t.html_url+"/fork",dlURL:"",parent:function(){return t.fork?void i.ajax({url:t.url,async:!1,success:function(i){return i.parent.full_name}}):""}()}
s[o.name]=o})}),a.push(r)}(),""!==o.bitbucket&&!function(){var e,n,r="https://bitbucket.org/api/2.0/repositories/"+o.bitbucket
e=t(r),n=e.done(function(e){var n=e.values
i.each(n,function(i,e){var n={origin:"bitbucket",name:e.name,url:e.links.html.href,cloneURL:e.links.html.href+".git",desc:e.description,wikiURL:function(){return e.has_wiki===!0?e.links.html.href+"/wiki":""}(),isFork:!1,lang:e.language,img:e.links.avatar.href,forkURL:function(){return"no_public_forks"!==e.fork_policy?e.links.html.href+"/fork":""}()}
s[n.name]=n})}),a.push(n)}(),i.when.apply(null,a).done(function(){r.resolve(s)}),r.promise()},i.fn.projectList.options={isContainer:!0,templateID:"",containerID:"",marginRight:"20px",marginBottom:"20px",username:{github:"",bitbucket:"",customURL:""},displayUsernames:!1,hide:[],images:{githubDefaultIcon:"img/repo.png",demo:"img/desktop.png",clone:"img/clone.png",wiki:"img/wiki.png",fork:"img/fork.png",download:"img/download.png"},linksOpenIn:"_blank",showStars:!0,showZeroStars:!1}}(jQuery)
